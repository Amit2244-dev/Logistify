<div class="fixed inset-0 flex items-start sm:items-center justify-center z-50 bg-[black/50] backdrop-blur-md"
  *ngIf="isOpen">
  <div class="max-h-screen w-full sm:w-auto overflow-y-auto rounded-[10px]">
    <div class="bg-[#2c2155] rounded-xl p-8 w-[90%] max-w-md shadow-lg">
      <h2 class="text-2xl font-bold text-[#fff] text-center mb-2">Two-Factor<br />authentication</h2>
      <p class="text-sm text-center text-[#fff] mb-6">
        Enter the 6-digit code generated by your app to confirm your action.
      </p>

      <input type="text" maxlength="6" placeholder="Enter OTP" [(ngModel)]="otp"
        class="w-full px-4 py-2 border border-purple-300 text-center rounded-md focus:outline-none focus:ring-2 focus:ring-purple-400 text-[#fff] placeholder-purple-300" />

      <button
        class="mt-6 w-full cursor-pointer bg-purple-400  text-white py-2 rounded-full flex justify-center font-medium hover:bg-purple-500 transition"
        (click)="verifyOtp()" [disabled]="isVerifying || otp.length !== 6">
        <ng-container *ngIf="isVerifying">
          <mat-spinner [diameter]="24" class="white-custom-spinner"></mat-spinner>
        </ng-container>
        <span *ngIf="!isVerifying">Verify</span>
      </button>

      <p class="text-sm text-center mt-4 flex justify-center gap-2 text-[#fff]">
        You want to resend
        @if (!isResendOtp && canResend) {
        <a class="text-blue-500 underline cursor-pointer" (click)="resendOtp()">Resend</a>
        } @else {
        <ng-container #countdownTpl>
          <!-- countdown content here -->
        </ng-container>
        }


        <ng-template #countdownTpl>
          <ng-container *ngIf="isResendOtp">
            <mat-spinner [diameter]="20" class="custom-spinner inline-block align-middle ml-2"></mat-spinner>
          </ng-container>
          @if (!isResendOtp && !canResend) {
          <span class="text-red-500 ml-1">({{ resendCountdown }}s)</span>
          }

        </ng-template>
      </p>

    </div>
  </div>
</div>